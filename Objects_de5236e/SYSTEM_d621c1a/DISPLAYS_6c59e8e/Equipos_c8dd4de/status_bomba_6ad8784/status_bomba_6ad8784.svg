<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<svg height="66" version="1.2" width="586" xmlns="http://www.w3.org/2000/svg" xmlns:atv="http://webmi.atvise.com/2007/svgext" xmlns:xlink="http://www.w3.org/1999/xlink">
 <defs/>
 <metadata>
  <atv:gridconfig enabled="true" gridstyle="lines" height="20" width="20"/>
  <atv:snapconfig enabled="true" height="2" width="2"/>
 </metadata>
 <svg atv:refpx="57.5" atv:refpy="15" height="30" id="Apagado" transform="matrix(0.7188,0,0,1,0,0)" width="160" x="0" xlink:href="SYSTEM.LIBRARY.ATVISE.OBJECTDISPLAYS.Advanced.radiobutton" y="0">
  <atv:argument name="radiogroupId" value="Estado"/>
  <atv:argument name="base" prefix="base" value=".status"/>
  <atv:argument name="value" value="0"/>
  <atv:argument name="outputNode" prefix="base" value=".ON"/>
  <atv:argument name="label" value="T{Apagado}"/>
  <atv:argument name="right" value="SYSTEM.SECURITY.RIGHTS.USER.Control"/>
  <atv:overwrite id="radiobutton_symbol" transform="matrix(1.6348,0,0,1.175,0,0)"/>
  <atv:overwrite id="focus_frame" transform="matrix(1.3913,0,0,1,0,0)"/>
  <atv:overwrite id="blinking_frame" transform="matrix(1.3913,0,0,1,0,0)"/>
  <atv:overwrite id="radiobutton_bg" transform="matrix(1.3913,0,0,1,0,0)"/>
  <atv:overwrite id="id_1" transform="matrix(1.3913,0,0,1,0,0)"/>
  <atv:overwrite id="radiobutton_label" transform="matrix(1.7575,0,0,1,-12.4486,0)" x="38.5"/>
 </svg>
 <svg atv:refpx="57.5" atv:refpy="51" height="30" id="Encendido" transform="matrix(0.7188,0,0,1,0,0)" width="160" x="0" xlink:href="SYSTEM.LIBRARY.ATVISE.OBJECTDISPLAYS.Advanced.radiobutton" y="36">
  <atv:argument name="base" prefix="base" value=".status"/>
  <atv:argument name="radiogroupId" value="Estado"/>
  <atv:argument name="label" value="T{Encendido}"/>
  <atv:argument name="value" value="1"/>
  <atv:argument name="outputNode" prefix="base" value=".ON"/>
  <atv:argument name="right" value="SYSTEM.SECURITY.RIGHTS.USER.Control"/>
  <atv:overwrite id="radiobutton_symbol" transform="matrix(1.6348,0,0,1.175,0,0)"/>
  <atv:overwrite id="focus_frame" transform="matrix(1.3913,0,0,1,0,0)"/>
  <atv:overwrite id="blinking_frame" transform="matrix(1.3913,0,0,1,0,0)"/>
  <atv:overwrite id="radiobutton_bg" transform="matrix(1.3913,0,0,1,0,0)"/>
  <atv:overwrite id="id_1" transform="matrix(1.3913,0,0,1,0,0)"/>
  <atv:overwrite id="radiobutton_label" transform="matrix(1.7028,0,0,1,-10.5905,0)" x="38.5"/>
 </svg>
 <svg atv:refpx="188" atv:refpy="15" height="30" id="Manual" transform="matrix(0.75,0,0,1,0,0)" width="160" x="170.667" xlink:href="SYSTEM.LIBRARY.ATVISE.OBJECTDISPLAYS.Advanced.radiobutton" y="0">
  <atv:argument name="radiogroupId" value="Modo"/>
  <atv:argument name="base" prefix="base" value=".MA"/>
  <atv:argument name="value" value="0"/>
  <atv:argument name="label" value="T{Manual}"/>
  <atv:argument name="right" value="SYSTEM.SECURITY.RIGHTS.USER.Control"/>
  <atv:overwrite id="radiobutton_symbol" transform="matrix(1.5667,0,0,1.175,0,0)"/>
  <atv:overwrite id="focus_frame" transform="matrix(1.3333,0,0,1,0,0)"/>
  <atv:overwrite id="blinking_frame" transform="matrix(1.3333,0,0,1,0,0)"/>
  <atv:overwrite id="radiobutton_bg" transform="matrix(1.3333,0,0,1,0,0)"/>
  <atv:overwrite id="id_1" transform="matrix(1.3333,0,0,1,0,0)"/>
  <atv:overwrite id="radiobutton_label" transform="matrix(1.75,0,0,1,-14.1667,0)" x="38.5"/>
 </svg>
 <svg atv:refpx="188" atv:refpy="51" height="30" id="Automatico" transform="matrix(0.75,0,0,1,0,0)" width="160" x="170.667" xlink:href="SYSTEM.LIBRARY.ATVISE.OBJECTDISPLAYS.Advanced.radiobutton" y="36">
  <atv:argument name="base" prefix="base" value=".MA"/>
  <atv:argument name="radiogroupId" value="Modo"/>
  <atv:argument name="label" value="T{Automático}"/>
  <atv:argument name="value" value="1"/>
  <atv:argument name="right" value="SYSTEM.SECURITY.RIGHTS.USER.Control"/>
  <atv:overwrite id="radiobutton_symbol" transform="matrix(1.5667,0,0,1.175,0,0)"/>
  <atv:overwrite id="focus_frame" transform="matrix(1.3333,0,0,1,0,0)"/>
  <atv:overwrite id="blinking_frame" transform="matrix(1.3333,0,0,1,0,0)"/>
  <atv:overwrite id="radiobutton_bg" transform="matrix(1.3333,0,0,1,0,0)"/>
  <atv:overwrite id="id_1" transform="matrix(1.3333,0,0,1,0,0)"/>
  <atv:overwrite id="radiobutton_label" transform="matrix(1.6232,0,0,1,-9.8551,0)" x="38.5"/>
 </svg>
 <svg atv:refpx="346" atv:refpy="15" height="30" id="Local" transform="matrix(0.9375,0,0,1,0,0)" width="160" x="289.067" xlink:href="SYSTEM.LIBRARY.ATVISE.OBJECTDISPLAYS.Advanced.radiobutton" y="0">
  <atv:argument name="radiogroupId" value="Control"/>
  <atv:argument name="base" prefix="base" value=".loc_rem"/>
  <atv:argument name="value" value="0"/>
  <atv:argument name="label" value="T{Control en sitio}"/>
  <atv:argument name="outputNode" prefix="base" value=".LR"/>
  <atv:argument name="right" value="SYSTEM.SECURITY.RIGHTS.USER.Control"/>
  <atv:overwrite id="radiobutton_symbol" transform="matrix(1.2533,0,0,1.175,0,0)"/>
  <atv:overwrite id="focus_frame" transform="matrix(1.0667,0,0,1,0,0)"/>
  <atv:overwrite id="blinking_frame" transform="matrix(1.0667,0,0,1,0,0)"/>
  <atv:overwrite id="radiobutton_bg" transform="matrix(1.0667,0,0,1,0,0)"/>
  <atv:overwrite id="id_1" transform="matrix(1.0667,0,0,1,0,0)"/>
  <atv:overwrite id="radiobutton_label" transform="matrix(1.2425,0,0,1,-5.978,0)" x="38.5"/>
 </svg>
 <svg atv:refpx="346" atv:refpy="51" height="30" id="Remoto" transform="matrix(0.9375,0,0,1,0,0)" width="160" x="289.067" xlink:href="SYSTEM.LIBRARY.ATVISE.OBJECTDISPLAYS.Advanced.radiobutton" y="36">
  <atv:argument name="base" prefix="base" value=".loc_rem"/>
  <atv:argument name="radiogroupId" value="Control"/>
  <atv:argument name="label" value="T{Control en oficina}"/>
  <atv:argument name="value" value="1"/>
  <atv:argument name="outputNode" prefix="base" value=".LR"/>
  <atv:argument name="right" value="SYSTEM.SECURITY.RIGHTS.USER.Control"/>
  <atv:overwrite id="radiobutton_symbol" transform="matrix(1.2533,0,0,1.175,0,0)"/>
  <atv:overwrite id="focus_frame" transform="matrix(1.0667,0,0,1,0,0)"/>
  <atv:overwrite id="blinking_frame" transform="matrix(1.0667,0,0,1,0,0)"/>
  <atv:overwrite id="radiobutton_bg" transform="matrix(1.0667,0,0,1,0,0)"/>
  <atv:overwrite id="id_1" transform="matrix(1.0667,0,0,1,0,0)"/>
  <atv:overwrite id="radiobutton_label" transform="matrix(1.2205,0,0,1,-5.2307,0)" x="38.5"/>
 </svg>
 <svg atv:refpx="511" atv:refpy="15" height="30" id="Operativo" transform="matrix(0.9375,0,0,1,0,0)" width="160" x="465.067" xlink:href="SYSTEM.LIBRARY.ATVISE.OBJECTDISPLAYS.Advanced.radiobutton" y="0">
  <atv:argument name="radiogroupId" value="Mantenimiento"/>
  <atv:argument name="base" prefix="base" value=".maintenance"/>
  <atv:argument name="value" value="0"/>
  <atv:argument name="label" value="T{Operativo}"/>
  <atv:argument name="right" value="SYSTEM.SECURITY.RIGHTS.USER.Control"/>
  <atv:overwrite id="radiobutton_symbol" transform="matrix(1.2533,0,0,1.175,0,0)"/>
  <atv:overwrite id="focus_frame" transform="matrix(1.0667,0,0,1,0,0)"/>
  <atv:overwrite id="blinking_frame" transform="matrix(1.0667,0,0,1,0,0)"/>
  <atv:overwrite id="radiobutton_bg" transform="matrix(1.0667,0,0,1,0,0)"/>
  <atv:overwrite id="id_1" transform="matrix(1.0667,0,0,1,0,0)"/>
  <atv:overwrite id="radiobutton_label" transform="matrix(1.0667,0,0,1,0,0)"/>
 </svg>
 <svg atv:refpx="511" atv:refpy="51" height="30" id="Mantenimiento" transform="matrix(0.9375,0,0,1,0,0)" width="160" x="465.067" xlink:href="SYSTEM.LIBRARY.ATVISE.OBJECTDISPLAYS.Advanced.radiobutton" y="36">
  <atv:argument name="base" prefix="base" value=".maintenance"/>
  <atv:argument name="radiogroupId" value="Mantenimiento"/>
  <atv:argument name="label" value="T{Mantenimiento}"/>
  <atv:argument name="value" value="1"/>
  <atv:argument name="right" value="SYSTEM.SECURITY.RIGHTS.USER.Control"/>
  <atv:overwrite id="radiobutton_symbol" transform="matrix(1.2533,0,0,1.175,0,0)"/>
  <atv:overwrite id="focus_frame" transform="matrix(1.0667,0,0,1,0,0)"/>
  <atv:overwrite id="blinking_frame" transform="matrix(1.0667,0,0,1,0,0)"/>
  <atv:overwrite id="radiobutton_bg" transform="matrix(1.0667,0,0,1,0,0)"/>
  <atv:overwrite id="id_1" transform="matrix(1.0667,0,0,1,0,0)"/>
  <atv:overwrite id="radiobutton_label" transform="matrix(1.0667,0,0,1,0,0)"/>
 </svg>
 <script atv:desc="" atv:name="" type="text/ecmascript"><![CDATA[// === ACTUALIZACIÓN DEL ESTADO DE VISIBILIDAD SEGÚN VARIABLE MA ===

webMI.data.subscribe(webMI.query["base"] + ".MA", function(e) {
    const visible = !e.value; // true si MA es false
    webMI.gfx.setVisible("Apagado", visible);
    webMI.gfx.setVisible("Encendido", visible);
});

// === MENSAJES PERSONALIZADOS PARA CADA BOTÓN DE REBOMBEO ===

const logMessages = {
    "Apagado":      "Se ha ordenado el apagado del equipo",
    "Encendido":    "Se ha ordenado el encendido del equipo",
    "Manual":       "Se ha activado el modo manual",
    "Automatico":   "Se ha activado el modo automático",
    "Local":        "Se ha cambiado a modo local",
    "Remoto":       "Se ha cambiado a modo remoto",
    "Operativo":    "Se ha puesto el equipo en modo operativo",
    "Mantenimiento":"Se ha puesto el equipo en modo mantenimiento"
};

// === FUNCIÓN REUTILIZABLE PARA AGREGAR EVENTOS Y REGISTRAR LOG ===

function addLogEvent(id, mensaje) {
    webMI.addEvent(id, "click", function() {
        webMI.callExtension("SYSTEM.LIBRARY.ATVISE.QUICKDYNAMICS.WriteLog", {
            group: "Manipulación",
            id: id,
            label: webMI.query["base"],
            message: mensaje,
            subgroup: "Rebombeo"
        });
    });
}

// === REGISTRO DE EVENTOS PARA TODOS LOS BOTONES DEFINIDOS ===

Object.entries(logMessages).forEach(([id, mensaje]) => {
    addLogEvent(id, mensaje);
});
]]></script>
</svg>
