<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<svg height="102.42" version="1.2" width="325" xmlns="http://www.w3.org/2000/svg" xmlns:atv="http://webmi.atvise.com/2007/svgext" xmlns:xlink="http://www.w3.org/1999/xlink">
 <defs/>
 <metadata>
  <atv:gridconfig enabled="false" gridstyle="lines" height="20" width="20"/>
  <atv:snapconfig enabled="true" height="1" width="1"/>
 </metadata>
 <rect atv:refpx="162.5" atv:refpy="52" fill="#ffffff" height="93" id="id_1" stroke="#000000" stroke-width="2" width="323" x="1" y="5.5"/>
 <rect atv:refpx="150.563" atv:refpy="41.829" fill="#d5d5d5" height="13.812" id="id_0" stroke="#000000" stroke-opacity="0" stroke-width="2.15" width="297.125" x="2" y="21.688"/>
 <polygon atv:refpx="310.499" atv:refpy="28.5" fill="#d5d5d5" id="id_3" points="298.022,33.833 298.022,44.5 320,28.5 298.022,12.498 298.022,12.498" stroke="#000000" stroke-opacity="0" stroke-width="2.15"/>
 <rect atv:refpx="195" atv:refpy="30.888" fill="#ffffff" height="45.423" id="id_13" stroke="#000000" stroke-width="2" width="108" x="178" y="7.177"/>
 <text atv:refpx="242.267" atv:refpy="35.115" fill="#000000" font-family="Arial" font-size="22" font-weight="bold" id="id_38" text-anchor="end" x="255.767" y="47.615">Q</text>
 <text atv:refpx="269.386" atv:refpy="41.421" fill="#000000" font-family="Arial" font-size="18" font-weight="bold" id="id_39" text-anchor="end" x="278.886" y="47.921">l/s</text>
 <text atv:refpx="112.818" atv:refpy="46.5" fill="#000000" font-family="Arial" font-size="20" id="id_6" text-anchor="end" x="131.5" y="51">NL</text>
 <text atv:refpx="155.425" atv:refpy="46.5" fill="#000000" font-family="Arial" font-size="18" font-weight="bold" id="id_7" text-anchor="end" x="164.5" y="51">D</text>
 <text atv:refpx="178.326" atv:refpy="46.5" fill="#000000" font-family="Arial" font-size="18" font-weight="bold" id="id_14" text-anchor="start" x="167.5" y="51">"</text>
 <text atv:refpx="259.886" atv:refpy="19" fill="#000000" font-family="Arial" font-size="12" font-weight="bold" id="id_15" text-anchor="end" x="278.886" y="23.5">Caudal</text>
 <text atv:refpx="29.965" atv:refpy="17" fill="#000000" font-family="Arial" font-size="18" font-weight="bold" id="id_2" text-anchor="start" x="15.5" y="21.5">Nombre</text>
 <rect atv:refpx="45.861" atv:refpy="76.211" fill="#ffffff" height="45.423" id="id_5" stroke="#000000" stroke-width="2" width="285" x="1" y="52.5"/>
 <text atv:refpx="267.119" atv:refpy="87.421" fill="#000000" font-family="Arial" font-size="18" font-weight="bold" id="id_9" text-anchor="end" x="280.119" y="93.921">m3</text>
 <text atv:refpx="233.119" atv:refpy="65" fill="#000000" font-family="Arial" font-size="12" font-weight="bold" id="id_10" text-anchor="end" x="280.119" y="69.5">Produccion Total</text>
 <text atv:refpx="235.5" atv:refpy="81" fill="#000000" font-family="Arial" font-size="22" font-weight="bold" id="id_4" text-anchor="end" x="249" y="93.5">Q</text>
 <script atv:desc="" atv:name="" type="text/ecmascript"><![CDATA[// Formatea números según configuración regional
function formatNumber(value, digits = 1) {
    return new Intl.NumberFormat('es-MX', { maximumFractionDigits: digits }).format(value);
}

// Suscribe a variable y actualiza texto con formato opcional
function subscribeText(id, variablePath, formatter = val => val) {
    webMI.data.subscribe(variablePath, function(e) {
        webMI.gfx.setText(id, formatter(e.value));
    });
}

webMI.data.subscribe(webMI.query["base"] + ".current_flow", function(e) {
var id = "id_38";
var value = e.value;
webMI.gfx.setText(id, webMI.sprintf("%.1f", value));

});


webMI.data.subscribe(webMI.query["base"] + ".name", function(e) {
var id = "id_6";
var value = e.value;
webMI.gfx.setText(id, value);

});
webMI.data.subscribe(webMI.query["base"] + ".diameter", function(e) {
var id = "id_7";
var value = e.value;
webMI.gfx.setText(id, value);

});
webMI.data.subscribe(webMI.query["base"] + ".current_flow", function(e) {
var id = "id_3";
var status = e.status;
var value = e.value;

if (status == 0 && value > 1){
	webMI.gfx.setFill(id, "#2c99d8");
	}
	else {
	webMI.gfx.setFill(id, "#d5d5d5");
	
	}
});
webMI.data.subscribe(webMI.query["base"] + ".current_flow", function(e) {
var id = "id_0";
var status = e.status;
var value = e.value;

if (status == 0 && value > 1){
	webMI.gfx.setFill(id, "#2c99d8");
	}
	else {
	webMI.gfx.setFill(id, "#d5d5d5");
	
	}
});


webMI.data.subscribe(webMI.query["base"] + ".host_name", function(e) {
var id = "id_2";
var value = e.value;
webMI.gfx.setText(id, value);

});


subscribeText("id_4", webMI.query["base"] + ".current_total_volume", val => formatNumber(val));]]></script>
</svg>
